name = "krazywaz"
main = ".open-next/worker.js"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "rabbi-kraz-db"
database_id = "ed0b9cd5-86e2-4a75-a375-cd12903a2da4"

# R2 Storage bucket for media uploads (audio, PDFs, video)
[[r2_buckets]]
binding = "MEDIA_BUCKET"
bucket_name = "krazywaz-media"

# Assets configuration for OpenNext
[assets]
directory = ".open-next/assets"
binding = "ASSETS"

# Local / default environment variables
# These are used when running `wrangler dev` locally
[vars]
NEXT_PUBLIC_BASE_URL = "http://localhost:8787"
ADMIN_SETUP_TOKEN = "admin123"

[build]
command = "npm run build:worker"

# Production environment overrides
# Applied when deploying with `wrangler deploy` or using `--env production`
[env.production.vars]
NEXT_PUBLIC_BASE_URL = "https://krazywaz.rabbikraz1.workers.dev"
